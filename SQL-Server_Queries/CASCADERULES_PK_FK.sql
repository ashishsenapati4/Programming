create database MYCLASS;
USE MYCLASS;

STEP1:
CREATE TABLE P1(EID INT PRIMARY KEY,ENAME VARCHAR(20),SAL MONEY);

STEP2:
INSERT INTO P1 VALUES(100,'ADAMS',78000),(101,'SIMON',87000),(103,'DAVID',67000);

STEP3:
CREATE TABLE C1(MBNO BIGINT,EADDRESS VARCHAR(50),EID INT FOREIGN KEY REFERENCES P1(EID));

INSERT INTO C1 VALUES(9777418756,'HYD',100)
INSERT INTO C1 VALUES(9775676678,'HYD',100)
INSERT INTO C1 VALUES(8678778778,'MP',101)
INSERT INTO C1 VALUES(9877677881,'UP',103)

SELECT * FROM P1;
SELECT * FROM C1;

TESTING:
--A) INSERTION RULE(FIXED):
--------------------------
INSERT INTO C1 VALUES(9877677881,'UP',104) -- NOT ALLOWED

--B) UPDATION RULE:
--------------------
UPDATE P1 SET EID=80 WHERE EID=100 -- NOT ALLOWED

--C) DELETION RULE:
--------------------
DELETE FROM P1 WHERE EID=100; -- NOT ALLOWED

SP_HELP C1;

-- WITH CASCADE RULES
-------------------------
CREATE TABLE P2(EID INT PRIMARY KEY,ENAME VARCHAR(20),SAL MONEY);

INSERT INTO P2 VALUES(100,'ADAMS',78000),(101,'SIMON',87000),(103,'DAVID',67000);

CREATE TABLE C2(MBNO BIGINT,EADDRESS VARCHAR(50),EID INT FOREIGN KEY REFERENCES P2(EID)
ON UPDATE CASCADE ON DELETE CASCADE);

INSERT INTO C2 VALUES(9777418756,'HYD',100)
INSERT INTO C2 VALUES(9775676678,'HYD',100)
INSERT INTO C2 VALUES(8678778778,'MP',101)
INSERT INTO C2 VALUES(9877677881,'UP',103)

SELECT * FROM P2;
SELECT * FROM C2;

TESTING:
--A) INSERTION RULE(FIXED):
--------------------------
INSERT INTO C2 VALUES(9877677881,'UP',104) -- NOT ALLOWED

--B) UPDATION RULE:
--------------------
UPDATE P2 SET EID=100 WHERE EID=200 -- ALLOWED AFTER USING CASCADE

--C) DELETION RULE:
--------------------
DELETE FROM P2 WHERE EID=102; -- ALLOWED AFTER CASCADE
